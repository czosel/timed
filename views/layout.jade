doctype 5
html
  head
    title= settings.title
    link(rel='stylesheet', href='/bootstrap/css/bootstrap.css')
    link(rel='stylesheet', href='/bootstrap/css/bootstrap-responsive.css')
    link(rel='stylesheet', href='/css/style.css')
    script
      Timed = {}
    - if (user)
      script(src='/js/require.js', data-main='/js/main')
  body
    block navbar
      .navbar.navbar-inverse.navbar-fixed-top
        .navbar-inner
          .container-fluid
            a.btn.btn-navbar(data-toggle='collapse', data-target='.nav-collapse')
              span.icon-bar
              span.icon-bar
              span.icon-bar
            a.brand(href='/') Timed
            .nav-collapse.collapse
              ul.nav
                - if (user)
                  li(class=req.route.path == '/' ? 'active' : '')
                    a(href='/') Home
                  li
                    a#projects(href='#projects') Projects
                  li
                    a#customers(href='#customers') Customers
                  li
                    a#users(href='#users') Users
                li(class=req.route.path == '/about' ? 'active' : '')
                  a(href='/about') About
              - if (user)
                ul.nav.pull-right
                  li
                    a(href='/logout') Logout

    if user
      #trackbar.container-fluid
        block trackbar
          - var today = moment().hours(0).minutes(0).seconds(0).milliseconds(0)
          .attendance Attendance
            a.btn.btn-small.btn-inverse.mhs
              i.icon-white.icon-play
            - var attendance = user.attendances[user.attendances.length - 1]
            if attendance
              - var from = moment(attendance.from)
              - var to   = moment(attendance.to)
              a.from.mhs= from.format(from > today ? 'LT' : 'LLL')
              span -
              a.to.mhs= to && to.format(from > today ? 'LT' : 'LLL') || from.fromNow()
            else
              a.from.mhs
              span -
              a.to.mhs

          .activity Activity
            span.name.mhs
            a.btn.btn-small.btn-inverse.mhs
              i.icon-white.icon-play
            - var activity = attendance.activities[attendance.activities.length - 1]
            if activity
              - var from = moment(activity.from)
              - var to   = moment(activity.to)
              a.from.mhs= from.format(from > today ? 'LT' : 'LLL')
              span -
              a.to.mhs= to && to.format(from > today ? 'LT' : 'LLL') || from.fromNow()
            else
              a.from.mhs
              span -
              a.to.mhs

    #main.container-fluid
      block content
